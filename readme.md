# Cache redis fetch (WIP)

Intercept fetch and cache response in redis. If the response is cached, it will be returned from redis. Otherwise, it will be fetched and cached in redis. Fully (test ? o7) compatible with already existing fetch calls.

## Results

### Without cache redis

```
Running 10s test @ http://localhost:1337/todoswithoutcache
100 connections with 10 pipelining factor


┌─────────┬───────┬───────┬────────┬────────┬──────────┬──────────┬─────────┐
│ Stat    │ 2.5%  │ 50%   │ 97.5%  │ 99%    │ Avg      │ Stdev    │ Max     │
├─────────┼───────┼───────┼────────┼────────┼──────────┼──────────┼─────────┤
│ Latency │ 75 ms │ 83 ms │ 136 ms │ 170 ms │ 91.49 ms │ 52.12 ms │ 1549 ms │
└─────────┴───────┴───────┴────────┴────────┴──────────┴──────────┴─────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg     │ Stdev   │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ Req/Sec   │ 6955    │ 6955    │ 11287   │ 11727   │ 10833.4 │ 1331.28 │ 6954    │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ Bytes/Sec │ 2.12 MB │ 2.12 MB │ 3.43 MB │ 3.56 MB │ 3.29 MB │ 404 kB  │ 2.11 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘

Req/Bytes counts sampled once per second.
# of samples: 10

109k requests in 10.02s, 32.9 MB read
```

### With cache redis

```
Running 10s test @ http://localhost:1337/todos
100 connections with 10 pipelining factor


┌─────────┬───────┬───────┬───────┬───────┬─────────┬──────────┬────────┐
│ Stat    │ 2.5%  │ 50%   │ 97.5% │ 99%   │ Avg     │ Stdev    │ Max    │
├─────────┼───────┼───────┼───────┼───────┼─────────┼──────────┼────────┤
│ Latency │ 19 ms │ 26 ms │ 41 ms │ 57 ms │ 27.2 ms │ 11.38 ms │ 527 ms │
└─────────┴───────┴───────┴───────┴───────┴─────────┴──────────┴────────┘
┌───────────┬─────────┬─────────┬─────────┬─────────┬─────────┬────────┬─────────┐
│ Stat      │ 1%      │ 2.5%    │ 50%     │ 97.5%   │ Avg     │ Stdev  │ Min     │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼────────┼─────────┤
│ Req/Sec   │ 34655   │ 34655   │ 36031   │ 37087   │ 36067.2 │ 847.64 │ 34652   │
├───────────┼─────────┼─────────┼─────────┼─────────┼─────────┼────────┼─────────┤
│ Bytes/Sec │ 10.5 MB │ 10.5 MB │ 10.9 MB │ 11.3 MB │ 11 MB   │ 259 kB │ 10.5 MB │
└───────────┴─────────┴─────────┴─────────┴─────────┴─────────┴────────┴─────────┘

Req/Bytes counts sampled once per second.
# of samples: 10

362k requests in 10.02s, 110 MB read
```
